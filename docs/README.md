# 체스 게임

## 기능 목록

### Board
- [x] 기물들을 관리한다.
- [x] 기물들의 타겟 포지션으로의 이동 가능 여부를 체크한다.
- [x] 기물들에게 타겟 포지션으로의 이동을 지시한다.
- [x] 남아있는 기물들의 점수를 진영별로 계산한다.
  - Queen : 9점, Rook : 5점, Bishop : 3점, Knight : 2.5점으로 계산한다.
  - Pawn : 1점이지만, 같은 세로줄에 같은 색의 폰이 있는 경우 0.5점으로 계산한다.
  - King은 잡히면 게임이 종료되므로 점수가 없다.

### Piece
- [x] 6종류가 있다.
  - 킹, 퀸, 비숍, 나이트, 룩, 퀸
- [x] 움직일 수 있다.
  - [x] 종류 별로 다르게 움직일 수 있다.
    - [x] 킹 : 전후좌우, 대각선 한 칸씩
    - [x] 퀸 : 전후좌우, 대각선 칸 수 제한 X
    - [x] 나이트
      - [x] 두 칸 전진한 상태에서 좌우로 한 칸 이동
      - [x] 도착지에만 아군이 없으면 이동 가능
    - [x] 룩 : 전후,현 좌우 칸 수 제한 X
    - [x] 비숍 : 대각선 칸 수 제한 X
    - [x] 폰
      - [x] 한 칸씩 전진
      - [x] 초기상태에만 한 칸 혹은 두 칸 전진
      - [x] 전방 대각에 적이 존재하면 해당 방향으로 한 칸 이동 가능

### Position
- [x] 위치를 가진다.
- [x] 타겟 포지션을 받아서 방향을 계산한다.
- [x] 포지션 간 기울기를 계산한다.
- [x] 타겟 포지션으로의 이동 횟수를 구한다.
- [x] 다음 방향의 포지션을 반환한다.

### CommandManager
- [x] 게임 상태를 관리한다.
  - [x] 게임 커맨드에 따라 게임 상태를 전이시킨다. 
  - [x] START 커맨드 시 게임을 시작한다.
    - [x] 게임 종료 상태에서 START 시 예외가 발생한다.
  - [x] MOVE 커맨드 시 기물을 이동한다.
    - [x] 초기 상태에서 MOVE 시 예외가 발생한다.
    - [x] 게임 종료 상태에서 MOVE 시 예외가 발생한다.
  - [x] END 커맨드 시 게임을 종료한다.
    - [x] 게임 종료 상태에서 END 시 예외가 발생한다.
- [x] 이전 게임으로 재시작한다.
  - [x] 이전 게임 ID가 존재하지 않으면 예외가 발생한다.
  - [x] 게임 플레이 상태에서 확인 시 예외가 발생한다.
  - [x] 게임 종료 상태에서 확인 시 예외가 발생한다.
  - [x] 게임 결과 출력 상태에서 확인 시 예외가 발생한다.
- [x] 현재 상태의 기물들을 반환한다.
  - [x] 초기 상태에서 반환 시 예외가 발생한다.
  - [x] 게임 종료 상태에서 반환 시 예외가 발생한다.
- [x] 현재 턴 이름을 반환한다.
  - [x] 초기 상태에서 반환 시 예외가 발생한다.
  - [x] 게임 종료 상태에서 반환 시 예외가 발생한다.

### CommandStatus

### 1. Init
  - [x] 게임 시작 상태로 전이될 수 있다.
  - [x] 게임 종료 상태로 전이될 수 있다.
  - [x] 게임 결과 출력 상태로 전이될 수 없다.
  - [x] 이전 게임의 플레이 상태로 전이될 수 있다.
  - [x] 기물을 움직일 수 없다.
  - [x] 기물들을 반환할 수 없다.
  - [x] 턴 이름을 반환할 수 없다.
  - [x] 각 진영의 점수를 반환할 수 없다.
  - [x] 어느 진영이 이겼는지 결과를 반환할 수 없다.

### 2. Play
- [x] 게임 시작 상태로 전이될 수 있다.
- [x] 게임 종료 상태로 전이될 수 있다.
- [x] 게임 결과 출력 상태로 전이될 수 있다.
- [x] 이전 게임의 플레이 상태로 전이될 수 있다.
- [x] 기물을 움직일 수 있다.
  - [x] 움직일 때 마다 턴을 바꾼다.
  - [x] 움직여서 잡은 기물이 King이면 게임을 종료한다.
- [x] 기물들을 반환할 수 있다.
- [x] 현재 턴 이름을 반환할 수 있다.
- [x] 각 진영의 점수를 반환할 수 있다.
- [x] 어느 진영이 이겼는지 결과를 반환할 수 있다.

### 3. End
- [x] 게임 시작 상태로 전이될 수 없다.
- [x] 게임 종료 상태로 전이될 수 없다.
- [x] 게임 결과 출력 상태로 전이될 수 없다.
- [x] 이전 게임의 플레이 상태로 전이될 수 있다.
- [x] 기물을 움직일 수 없다.
- [x] 기물들을 반환할 수 없다.
- [x] 턴 이름을 반환할 수 없다.
- [x] 각 진영의 점수를 반환할 수 있다.
- [x] 어느 진영이 이겼는지 결과를 반환할 수 있다.

### 4. PrintGameResult
- [x] 게임 시작 상태로 전이될 수 있다.
- [x] 게임 종료 상태로 전이될 수 있다.
- [x] 게임 결과 출력 상태로 전이될 수 없다.
- [x] 이전 게임의 플레이 상태로 전이될 수 있다.
- [x] 기물을 움직일 수 있다.
  - [x] 움직일 때 마다 턴을 바꾼다.
  - [x] 움직여서 잡은 기물이 King이면 게임을 종료한다.
- [x] 기물들을 반환할 수 없다.
- [x] 현재 턴 이름을 반환할 수 없다.
- [x] 각 진영의 점수를 반환할 수 있다.
- [x] 어느 진영이 이겼는지 결과를 반환할 수 있다.

---
## DB

- [ ] DB 연결을 한다.
  

### 시나리오 작성

### 게임 시작 시
- [x] 게임 ID(방 번호)를 받아서 이전 게임이 있는지 확인한다.
  - [x] 이전 게임이 없는 경우
    - [x] 새 게임을 생성한다.
    - [x] 초기 기물들을 저장한다.
  - [x] 이전 게임이 있는 경우
    - [x] 이전 게임으로 재시작한다.
- [ ] 말이 움직이면 움직인 기물들을 업데이트한다.

---

### OutputView
- [x] 이전 게임 ID 입력 메시지를 출력할 수 있다.
- [x] 게임 시작 메시지를 출력할 수 있다.
- [x] 게임 시작/종료/이동 여부 입력 메시지를 출력할 수 있다.
- [x] 보드판을 출력할 수 있다.
- [x] 현재 턴을 출력할 수 있다.
- [x] 각 진영의 점수를 출력할 수 있다.
- [x] 어느 진영이 이겼는지 결과를 출력할 수 있다.

### InputView
- [x] 게임 시작/종료/이동/상태 여부를 입력할 수 있다.
  - [x] 'start' 또는 'end', 'move', 'status'가 아니면 예외처리한다.
  - [x] 'move'는 소스 위치와 타겟 위치를 모두 입력해야 한다.

- [x] 이전 게임 ID(방 번호)를 입력할 수 있다.
  - [x] 게임 ID가 숫자가 아니면 예외가 발생한다.

